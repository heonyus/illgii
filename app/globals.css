@import "tailwindcss";
@plugin "@tailwindcss/typography";

@font-face {
  font-family: 'BookkMyungjo';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/BookkMyungjo-Lt.woff2') format('woff2');
  font-weight: 400;
  font-display: swap;
}

:root {
  --background: #ffffff;
  --foreground: #191919;
  /* 타임라인 간격 변수 */
  --timeline-node-size: 0.75rem; /* w-3 h-3 = 12px = 0.75rem */
  --timeline-node-top-offset: 0.75rem; /* 위쪽 노드 위치 */
  --timeline-date-node-gap: 0.75rem; /* 날짜와 노드 간격 mb-3 */
  --timeline-node-line-gap: 0.5rem; /* 노드와 선 간격 mt-2 */
  --timeline-card-padding-mobile: 2rem; /* pb-8 */
  --timeline-card-padding-tablet: 2.5rem; /* pb-10 */
  --timeline-card-padding-desktop: 3rem; /* pb-12 */
}

/* .dark {
  --background: #000000;
  --foreground: #f9fafb;
} */

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

* {
  box-sizing: border-box;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: 'BookkMyungjo', var(--font-geist-sans), -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html {
  background: var(--background);
}

/* html.dark,
html.dark body {
  background-color: #000000 !important;
} */

/* 라이트 모드에서 body 배경색 강제 */
html:not(.dark) body {
  background-color: #ffffff !important;
}

/* 스크롤바 스타일링 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

/* .dark ::-webkit-scrollbar-track {
  background: #1a1a1a;
} */

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

/* .dark ::-webkit-scrollbar-thumb {
  background: #444;
} */

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* .dark ::-webkit-scrollbar-thumb:hover {
  background: #555;
} */

/* blockquote 따옴표 제거 */
.prose blockquote::before,
.prose blockquote::after,
.prose-lg blockquote::before,
.prose-lg blockquote::after,
div.prose blockquote::before,
div.prose blockquote::after,
div.prose-lg blockquote::before,
div.prose-lg blockquote::after,
blockquote::before,
blockquote::after {
  content: none !important;
  display: none !important;
}

/* Tailwind Typography의 기본 blockquote 스타일 오버라이드 */
.prose blockquote p::before,
.prose blockquote p::after,
.prose-lg blockquote p::before,
.prose-lg blockquote p::after,
div.prose blockquote p::before,
div.prose blockquote p::after,
div.prose-lg blockquote p::before,
div.prose-lg blockquote p::after {
  content: none !important;
  display: none !important;
}

/* 다크모드에서 블로그 본문 텍스트 색상을 흰색으로 강제 */
/* .dark .prose p,
.dark .prose-lg p,
.dark div.prose p,
.dark div.prose-lg p,
.dark .prose p.empty-paragraph,
.dark .prose-lg p.empty-paragraph,
.dark div.prose p.empty-paragraph,
.dark div.prose-lg p.empty-paragraph {
  color: #ffffff !important;
}

.dark .prose ul,
.dark .prose ol,
.dark .prose-lg ul,
.dark .prose-lg ol,
.dark div.prose ul,
.dark div.prose ol,
.dark div.prose-lg ul,
.dark div.prose-lg ol {
  color: #ffffff !important;
}

.dark .prose li,
.dark .prose-lg li,
.dark div.prose li,
.dark div.prose-lg li {
  color: #ffffff !important;
}

/* 모든 prose 내부 텍스트를 흰색으로 강제 (더 강력한 선택자) */
/* .dark [class*="prose"] p,
.dark [class*="prose"] ul,
.dark [class*="prose"] ol,
.dark [class*="prose"] li,
.dark [class*="prose"] span:not([class*="code"]):not([class*="pre"]) {
  color: #ffffff !important;
} */

/* Tailwind Typography의 기본 다크모드 색상 비활성화 */
/* .dark .prose {
  --tw-prose-body: #ffffff !important;
  --tw-prose-headings: #f3f4f6 !important;
  --tw-prose-lead: #ffffff !important;
  --tw-prose-links: #e5e7eb !important;
  --tw-prose-bold: #ffffff !important;
  --tw-prose-counters: #ffffff !important;
  --tw-prose-bullets: #ffffff !important;
  --tw-prose-hr: #ffffff !important;
  --tw-prose-quotes: #ffffff !important;
  --tw-prose-quote-borders: #ffffff !important;
  --tw-prose-captions: #ffffff !important;
  --tw-prose-code: #ffffff !important;
  --tw-prose-pre-code: #ffffff !important;
  --tw-prose-pre-bg: #1f2937 !important;
  --tw-prose-th-borders: #ffffff !important;
  --tw-prose-td-borders: #ffffff !important;
} */

/* ============================================
   라이트모드 스타일 (기본 스타일)
   ============================================ */

/* 라이트모드 body 및 전체 배경 강제 */
html:not(.dark) body,
html:not(.dark) {
  background-color: #ffffff !important;
}

html:not(.dark) body > div {
  background-color: #ffffff !important;
}

/* 라이트모드 네비게이션 바 강제 */
html:not(.dark) header {
  background-color: #ffffff !important; /* 완전 불투명 흰색 */
  border-bottom-color: #e5e7eb !important; /* border-gray-200 */
}

html:not(.dark) header a,
html:not(.dark) header button {
  color: #000000 !important; /* 검은색 */
}

html:not(.dark) header a:hover,
html:not(.dark) header button:hover {
  color: #000000 !important; /* 검은색 유지 */
  background-color: #f9fafb !important; /* hover:bg-gray-50 */
}

html:not(.dark) header svg text {
  fill: #000000 !important; /* 검은색 */
}

html:not(.dark) header svg {
  color: #000000 !important; /* 검은색 */
}

html:not(.dark) header svg path {
  stroke: #000000 !important; /* 검은색 */
  fill: #000000 !important; /* 검은색 */
}

/* 라이트모드 블로그 카드 - Tailwind 클래스와 함께 사용 */
article[class*="border-gray-200"]:not(.dark *) {
  background-color: #ffffff !important;
}

article[class*="border-gray-200"]:not(.dark *) h2 {
  color: #111827 !important; /* text-gray-900 */
}

article[class*="border-gray-200"]:not(.dark *) p {
  color: #374151 !important; /* text-gray-700 */
}

/* 라이트모드 블로그 페이지 제목 강제 - 모든 선택자 포함 */
html:not(.dark) article header h1,
html:not(.dark) article header h1.text-gray-900,
html:not(.dark) body article header h1,
html:not(.dark) body article header h1.text-gray-900,
html:not(.dark) article > header > h1,
html:not(.dark) main article header h1,
html:not(.dark) main article header h1.text-gray-900,
html:not(.dark) .diary-title {
  color: #111827 !important; /* text-gray-900 - 어두운 색상 */
}

/* 라이트모드 블로그 페이지 날짜 색상 강제 - 다크하게 */
html:not(.dark) article header time,
html:not(.dark) article header time.diary-date,
html:not(.dark) body article header time,
html:not(.dark) body article header time.diary-date,
html:not(.dark) article > header > time,
html:not(.dark) main article header time,
html:not(.dark) main article header time.diary-date,
html:not(.dark) .diary-date {
  color: #111827 !important; /* text-gray-900 - 어두운 색상 */
}

/* 라이트모드 타임라인 날짜/요일 텍스트 */
div[class*="flex-col"]:not(.dark *) div[class*="text-gray-900"] {
  color: #111827 !important;
}

div[class*="flex-col"]:not(.dark *) div[class*="text-gray-800"] {
  color: #1f2937 !important;
}

/* 라이트모드 마크다운 본문 텍스트 색상 강제 - 검은색 */
/* 모든 가능한 선택자로 강제 적용 */
.prose p,
.prose-lg p,
div.prose p,
div.prose-lg p,
article .prose p,
article .prose-lg p,
article div.prose p,
article div.prose-lg p,
.prose p.empty-paragraph,
.prose-lg p.empty-paragraph,
div.prose p.empty-paragraph,
div.prose-lg p.empty-paragraph {
  color: #000000 !important;
}

.prose ul,
.prose ol,
.prose-lg ul,
.prose-lg ol,
div.prose ul,
div.prose ol,
div.prose-lg ul,
div.prose-lg ol,
article .prose ul,
article .prose ol,
article .prose-lg ul,
article .prose-lg ol {
  color: #000000 !important;
}

.prose li,
.prose-lg li,
div.prose li,
div.prose-lg li,
article .prose li,
article .prose-lg li {
  color: #000000 !important;
}

.prose,
.prose-lg,
div.prose,
div.prose-lg {
  --tw-prose-body: #000000 !important;
  color: #000000 !important;
}

/* 더 구체적인 선택자로 강제 */
article .prose *:not(pre):not(code):not(pre code),
article .prose-lg *:not(pre):not(code):not(pre code),
article div.prose *:not(pre):not(code):not(pre code),
article div.prose-lg *:not(pre):not(code):not(pre code) {
  color: #000000 !important;
}

/* ============================================
   다크모드 스타일
   ============================================ */

/* 다크모드 네비게이션 바 강제 */
/* html.dark header {
  background-color: #000000 !important; 
  border-bottom-color: #374151 !important; 
}

html.dark header a,
html.dark header button {
  color: #ffffff !important; 
}

html.dark header a:hover,
html.dark header button:hover {
  color: #ffffff !important; 
  background-color: #1f2937 !important; 
}

html.dark header svg text {
  fill: #ffffff !important; 
}

html.dark header svg {
  color: #ffffff !important; 
}

html.dark header svg path {
  stroke: #ffffff !important; 
  fill: #ffffff !important; 
} */

/* 다크모드 블로그 카드 */
/* .dark article[class*="border-gray-800"] {
  background-color: #000000 !important;
}

.dark article[class*="border-gray-800"] h2 {
  color: #ffffff !important;
}

.dark article[class*="border-gray-800"] p {
  color: #ffffff !important;
} */

/* 다크모드 블로그 페이지 제목과 날짜 색상 통일 */
/* html.dark article header h1,
html.dark article header h1.text-gray-900,
html.dark article header h1.diary-title,
html.dark body article header h1,
html.dark body article header h1.diary-title,
html.dark article > header > h1,
html.dark main article header h1,
html.dark main article header h1.diary-title,
html.dark .diary-title {
  color: #f3f4f6 !important; 
}

html.dark article header time,
html.dark article header time.diary-date,
html.dark body article header time,
html.dark body article header time.diary-date,
html.dark article > header > time,
html.dark main article header time,
html.dark main article header time.diary-date,
html.dark .diary-date {
  color: #f3f4f6 !important; 
} */

/* 다크모드 타임라인 날짜/요일 텍스트 */
/* .dark div[class*="flex-col"] div[class*="text-gray-900"],
.dark div[class*="flex-col"] div[class*="text-gray-800"],
.dark div[class*="flex-col"] div[class*="text-gray-100"],
.dark div[class*="flex-col"] div[class*="text-gray-400"] {
  color: #ffffff !important;
} */

/* 다크모드 타임라인 점 */
/* .dark div[class*="rounded-full"][class*="bg-gray-800"] {
  background-color: #ffffff !important;
}

.dark div[class*="rounded-full"][class*="bg-gray-800"] {
  border-color: #000000 !important;
} */

/* 다크모드 타임라인 선 */
/* .dark div[class*="bg-gray-200"] {
  background-color: #374151 !important; 
} */

/* 타임라인 선 반응형 높이 계산 */
.timeline-line-top {
  /* 이전 항목의 아래쪽 노드부터 현재 항목의 위쪽 노드까지의 거리 계산 */
  /* 
    구조:
    - 이전 항목의 날짜/요일 위치: 이전 항목의 타임라인 컨테이너의 top: 0
    - 이전 항목의 아래쪽 노드 위치: 날짜/요일 아래 mb-3 (0.75rem) 후
    - 현재 항목의 날짜/요일 위치: 현재 항목의 타임라인 컨테이너의 top: 0
    - 현재 항목의 위쪽 노드 위치: top: -0.75rem
    
    거리:
    - 이전 항목의 아래쪽 노드부터 현재 항목의 날짜/요일까지: 이전 항목의 카드 패딩 (pb-8/10/12)
    - 현재 항목의 날짜/요일부터 위쪽 노드까지: 0.75rem (위로)
    
    따라서 선의 시작점과 높이:
    - top: 이전 항목의 카드 패딩 * -1 (이전 항목의 패딩 시작 위치)
    - height: 이전 항목의 카드 패딩 - 위쪽 노드 오프셋 (0.75rem)
    
    하지만 이전 항목의 아래쪽 노드는 패딩 시작 위치에서 0.75rem 아래에 있으므로,
    실제로는 패딩 시작 위치에서 위쪽 노드까지의 거리:
    - 패딩 시작 위치부터 현재 항목의 날짜/요일까지: 이전 항목의 카드 패딩
    - 현재 항목의 날짜/요일부터 위쪽 노드까지: 0.75rem (위로)
    
    따라서:
    - top: 이전 항목의 카드 패딩 * -1
    - height: 이전 항목의 카드 패딩 + 위쪽 노드 오프셋 (0.75rem)
    
    하지만 선은 패딩 시작 위치에서 시작하므로, 아래쪽 노드까지의 거리도 고려해야 함.
    실제로는 선이 이전 항목의 아래쪽 노드부터 시작하므로:
    - top: 이전 항목의 카드 패딩 * -1 - 0.75rem (아래쪽 노드 위치)
    - height: 이전 항목의 카드 패딩 + 위쪽 노드 오프셋 (0.75rem)
    
    간단하게 계산하면:
    - top: 이전 항목의 카드 패딩 * -1
    - height: 이전 항목의 카드 패딩 + 위쪽 노드 오프셋 (0.75rem)
  */
  top: calc(var(--timeline-card-padding-mobile) * -1);
  /* 위쪽 노드까지의 높이: 카드 패딩 + 위쪽 노드 오프셋 */
  height: calc(var(--timeline-card-padding-mobile) + var(--timeline-node-top-offset));
}

@media (min-width: 640px) {
  .timeline-line-top {
    top: calc(var(--timeline-card-padding-tablet) * -1);
    height: calc(var(--timeline-card-padding-tablet) + var(--timeline-node-top-offset));
  }
}

@media (min-width: 768px) {
  .timeline-line-top {
    top: calc(var(--timeline-card-padding-desktop) * -1);
    height: calc(var(--timeline-card-padding-desktop) + var(--timeline-node-top-offset));
  }
}

.timeline-line-bottom {
  /* 아래쪽 노드부터 다음 항목의 위쪽 노드까지의 거리 계산 */
  /* 
    구조:
    - 현재 항목의 아래쪽 노드 위치: 날짜/요일 아래 mb-3 (0.75rem) 후
    - 아래쪽 선 시작: 노드 아래 mt-2 (0.5rem) 후
    - 다음 항목의 날짜/요일 위치: 타임라인 컨테이너의 top: 0
    - 다음 항목의 위쪽 노드 위치: top: -0.75rem
    
    거리:
    - 아래쪽 노드부터 다음 항목의 날짜/요일까지: 카드 높이 (100%) + 카드 패딩
    - 다음 항목의 날짜/요일부터 위쪽 노드까지: 0.75rem (위로)
    
    따라서 선의 높이는:
    - 카드 높이 (100%) + 카드 패딩 + 위쪽 노드 오프셋 (0.75rem)
    
    하지만 선은 노드 아래 0.5rem 후에 시작하므로, 이 간격도 고려해야 함.
    실제로는 선이 다음 항목의 위쪽 노드까지 도달하려면:
    - 카드 높이 (100%) + 카드 패딩 + 위쪽 노드 오프셋 (0.75rem)
    
    더 정확하게는, 다음 항목의 위쪽 노드까지의 거리:
    - 현재 항목의 날짜/요일부터 다음 항목의 날짜/요일까지: 카드 높이 (100%) + 카드 패딩
    - 다음 항목의 날짜/요일부터 위쪽 노드까지: 0.75rem (위로)
    
    따라서 선의 minHeight는:
    - 카드 높이 (100%) + 카드 패딩 + 위쪽 노드 오프셋 (0.75rem)
  */
  min-height: calc(100% + var(--timeline-card-padding-mobile) + var(--timeline-node-top-offset));
}

@media (min-width: 640px) {
  .timeline-line-bottom {
    min-height: calc(100% + var(--timeline-card-padding-tablet) + var(--timeline-node-top-offset));
  }
}

@media (min-width: 768px) {
  .timeline-line-bottom {
    min-height: calc(100% + var(--timeline-card-padding-desktop) + var(--timeline-node-top-offset));
  }
}
